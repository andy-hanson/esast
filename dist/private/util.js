if (typeof define !== 'function') var define = require('amdefine')(module);define(['exports'], function (exports) {
	'use strict';

	Object.defineProperty(exports, '__esModule', {
		value: true
	});
	const assert = cond => {
		if (!cond) throw new Error('Assertion failed.');
	},
	      implementMany = (holder, methodName, nameToImpl) => {
		Object.keys(nameToImpl).forEach(name => {
			holder[name].prototype[methodName] = nameToImpl[name];
		});
	},
	      isEmpty = arr => arr.length === 0,
	      last = arr => {
		assert(!isEmpty(arr));
		return arr[arr.length - 1];
	},
	      pAdd = (obj, newName, newVal) => {
		if (Object.prototype.hasOwnProperty.call(obj, newName)) throw new Error(`Already has property ${ newName }, have ${ Object.keys(obj) }`);
		const _ = clone(obj);
		_[newName] = newVal;
		return _;
	},
	     

	// TODO: Support Sets and Unions
	type = (instance, itsType) => {
		if (!itsType.prototype.isPrototypeOf(Object(instance))) throw new Error(`${ instance } is not a ${ itsType }.`);
	},
	     

	// multi-line string literals like:
	// `
	//	a
	//		b
	//	c`
	// have too much indentation.
	// This will change it to "a\n\tb\nc" by detecting the first line's indentation.
	dedent = str => {
		if (str[0] !== '\n') return str;

		str = str.slice(1);

		let indent;
		for (indent = 0; indent < str.length; indent = indent + 1) if (str[indent] !== '\t') break;

		const dedentedLines = str.split('\n').map(line => line.slice(indent));
		return dedentedLines.join('\n');
	},
	     

	// TODO:ES6 Just use `new Set`
	newSet = setMembers => {
		const set = new Set();
		setMembers.forEach(_ => set.add(_));
		return set;
	};

	exports.assert = assert;
	exports.implementMany = implementMany;
	exports.isEmpty = isEmpty;
	exports.last = last;
	exports.pAdd = pAdd;
	exports.type = type;
	exports.dedent = dedent;
	exports.newSet = newSet;
	const clone = obj => {
		const nu = Object.create(Object.getPrototypeOf(obj));
		Object.getOwnPropertyNames(obj).forEach(name => {
			nu[name] = obj[name];
		});
		return nu;
	};
});
//# sourceMappingURL=data:application/json;base64,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QUssR0FBRyxHQUFHLElBQUk7QUFDcEIsUUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUE7QUFDcEQsUUFBTSxDQUFDLG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUk7QUFDL0MsS0FBRSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQTtHQUNwQixDQUFDLENBQUE7QUFDRixTQUFPLEVBQUUsQ0FBQTtFQUNULENBQUEiLCJmaWxlIjoicHJpdmF0ZS91dGlsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0XG5cdGFzc2VydCA9IGNvbmQgPT4ge1xuXHRcdGlmICghY29uZClcblx0XHRcdHRocm93IG5ldyBFcnJvcignQXNzZXJ0aW9uIGZhaWxlZC4nKVxuXHR9LFxuXG5cdGltcGxlbWVudE1hbnkgPSAoaG9sZGVyLCBtZXRob2ROYW1lLCBuYW1lVG9JbXBsKSA9PiB7XG5cdFx0T2JqZWN0LmtleXMobmFtZVRvSW1wbCkuZm9yRWFjaChuYW1lID0+IHtcblx0XHRcdGhvbGRlcltuYW1lXS5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBuYW1lVG9JbXBsW25hbWVdXG5cdFx0fSlcblx0fSxcblxuXHRpc0VtcHR5ID0gYXJyID0+IGFyci5sZW5ndGggPT09IDAsXG5cdGxhc3QgPSBhcnIgPT4ge1xuXHRcdGFzc2VydCghaXNFbXB0eShhcnIpKVxuXHRcdHJldHVybiBhcnJbYXJyLmxlbmd0aCAtIDFdXG5cdH0sXG5cblx0cEFkZCA9IChvYmosIG5ld05hbWUsIG5ld1ZhbCkgPT4ge1xuXHRcdGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBuZXdOYW1lKSlcblx0XHRcdHRocm93IG5ldyBFcnJvcihgQWxyZWFkeSBoYXMgcHJvcGVydHkgJHtuZXdOYW1lfSwgaGF2ZSAke09iamVjdC5rZXlzKG9iail9YClcblx0XHRjb25zdCBfID0gY2xvbmUob2JqKVxuXHRcdF9bbmV3TmFtZV0gPSBuZXdWYWxcblx0XHRyZXR1cm4gX1xuXHR9LFxuXG5cdC8vIFRPRE86IFN1cHBvcnQgU2V0cyBhbmQgVW5pb25zXG5cdHR5cGUgPSAoaW5zdGFuY2UsIGl0c1R5cGUpID0+IHtcblx0XHRpZiAoIShpdHNUeXBlLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKE9iamVjdChpbnN0YW5jZSkpKSlcblx0XHRcdHRocm93IG5ldyBFcnJvcihgJHtpbnN0YW5jZX0gaXMgbm90IGEgJHtpdHNUeXBlfS5gKVxuXHR9LFxuXG5cdC8vIG11bHRpLWxpbmUgc3RyaW5nIGxpdGVyYWxzIGxpa2U6XG5cdC8vIGBcblx0Ly9cdGFcblx0Ly9cdFx0YlxuXHQvL1x0Y2Bcblx0Ly8gaGF2ZSB0b28gbXVjaCBpbmRlbnRhdGlvbi5cblx0Ly8gVGhpcyB3aWxsIGNoYW5nZSBpdCB0byBcImFcXG5cXHRiXFxuY1wiIGJ5IGRldGVjdGluZyB0aGUgZmlyc3QgbGluZSdzIGluZGVudGF0aW9uLlxuXHRkZWRlbnQgPSBzdHIgPT4ge1xuXHRcdGlmIChzdHJbMF0gIT09ICdcXG4nKVxuXHRcdFx0cmV0dXJuIHN0clxuXG5cdFx0c3RyID0gc3RyLnNsaWNlKDEpXG5cblx0XHRsZXQgaW5kZW50XG5cdFx0Zm9yIChpbmRlbnQgPSAwOyBpbmRlbnQgPCBzdHIubGVuZ3RoOyBpbmRlbnQgPSBpbmRlbnQgKyAxKVxuXHRcdFx0aWYgKHN0cltpbmRlbnRdICE9PSAnXFx0Jylcblx0XHRcdFx0YnJlYWtcblxuXHRcdGNvbnN0IGRlZGVudGVkTGluZXMgPSBzdHIuc3BsaXQoJ1xcbicpLm1hcChsaW5lID0+IGxpbmUuc2xpY2UoaW5kZW50KSlcblx0XHRyZXR1cm4gZGVkZW50ZWRMaW5lcy5qb2luKCdcXG4nKVxuXHR9LFxuXG5cdC8vIFRPRE86RVM2IEp1c3QgdXNlIGBuZXcgU2V0YFxuXHRuZXdTZXQgPSBzZXRNZW1iZXJzID0+IHtcblx0XHRjb25zdCBzZXQgPSBuZXcgU2V0KClcblx0XHRzZXRNZW1iZXJzLmZvckVhY2goXyA9PiBzZXQuYWRkKF8pKVxuXHRcdHJldHVybiBzZXRcblx0fVxuXG5jb25zdCBjbG9uZSA9IG9iaiA9PiB7XG5cdGNvbnN0IG51ID0gT2JqZWN0LmNyZWF0ZShPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKSlcblx0T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqKS5mb3JFYWNoKG5hbWUgPT4ge1xuXHRcdG51W25hbWVdID0gb2JqW25hbWVdXG5cdH0pXG5cdHJldHVybiBudVxufVxuIl0sInNvdXJjZVJvb3QiOiIvc3JjIn0=