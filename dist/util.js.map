{"version":3,"sources":["util.js"],"names":[],"mappings":";;;;;;;;;;;AAKA,KAAM,eAAe,GAAG,IAAI,GAAG,EAAE,CAAA;AACjC,KAAM,qBAAqB,GAAG,IAAI,GAAG,EAAE,CAAA;;AAEhC,KACN,QAAQ,GAAG,kBAAA,IAAI,EAAI;AAClB,MAAI,CAAC,GAAG,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;AACjC,MAAI,CAAC,KAAK,SAAS,EAAE;AACpB,IAAC,GAAG,KAZoD,UAAU,CAYnD,mBAAiB,IAAI,CAAC,CAAC,CAAA;AACtC,kBAAe,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,CAAA;GAC5B;AACD,SAAO,CAAC,CAAA;EACR;KAED,yBAAyB,GAAG,mCAAA,YAAY,EAAI;AAC3C,MAAI,CAAC,GAAG,qBAAqB,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;AAC/C,MAAI,CAAC,KAAK,SAAS,EAAE;AACpB,IAAC,GAAG,kBAnBiC,cAAc,CAmBhC,YAAY,CAAC,GAAG,KArBqB,UAAU,CAqBpB,YAAY,CAAC,GAAG,KArBM,OAAO,CAqBL,YAAY,CAAC,CAAA;AACnF,wBAAqB,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC,CAAC,CAAA;GAC1C;AACD,SAAO,CAAC,CAAA;EACR;KAED,MAAM,GAAG,gBAAC,MAAM,EAAE,YAAY;SAC7B,YAzBgC,gBAAgB,CAyB/B,MAAM,EAAE,yBAAyB,CAAC,YAAY,CAAC,CAAC;EAAA;KAElE,WAAW,GAAG,qBAAA,CAAC;SACd,AAAC,CAAC,iBA9B6B,SAAS,AA8BjB,IAAI,CAAC,iBA/BL,WAAW,AA+BiB,GAAI,CAAC,GAAG,KA/BvB,mBAAmB,CA+BwB,CAAC,CAAC;EAAA;KAElF,YAAY,GAAG,sBAAA,CAAC;SAAI,CAAC,YAAY,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,WAAW,CAAC,GAAG,CAAE,WAAW,CAAC,CAAC,CAAC,CAAE;EAAA;KAEhF,UAAU,GAAG,oBAAA,GAAG;SACf,KAnC0C,cAAc,CAmCzC,KAnChB,aAAa,CAmCiB,KApC4B,UAAU,CAoC3B,OAAO,CAAC,EAAE,CAAE,KApCiB,OAAO,CAoChB,GAAG,CAAC,CAAE,CAAC,CAAC;EAAA;;;;AAGrE,MAAK,GAAG,eAAA,KAAK;SACZ,YArCO,uBAAuB,CAqCN,KAxCjB,cAAc,CAwCkB,CAAE,KAvC3B,eAAe,CAuC4B,KAAK,CAAC,CAAE,CAAC,EAAE,KAAK,CAAC;EAAA,CAAA;SA/B3E,QAAQ,GAAR,QAAQ;SASR,yBAAyB,GAAzB,yBAAyB;SASzB,MAAM,GAAN,MAAM;SAGN,WAAW,GAAX,WAAW;SAGX,YAAY,GAAZ,YAAY;SAEZ,UAAU,GAAV,UAAU;SAIV,KAAK,GAAL,KAAK","file":"util.js","sourcesContent":["import { BlockStatement, Declaration, ExpressionStatement, Identifier, Literal,\n\tNewExpression, ReturnStatement, Statement, ThrowStatement } from './ast'\nimport mangleIdentifier, { needsMangle, propertyNameOk } from './mangle-identifier'\nimport { functionExpressionThunk, memberExpression } from './specialize'\n\nconst specialNameToId = new Map()\nconst propertyToIdOrLiteral = new Map()\n\nexport const\n\tidCached = name => {\n\t\tlet _ = specialNameToId.get(name)\n\t\tif (_ === undefined) {\n\t\t\t_ = Identifier(mangleIdentifier(name))\n\t\t\tspecialNameToId.set(name, _)\n\t\t}\n\t\treturn _\n\t},\n\n\tpropertyIdOrLiteralCached = propertyName => {\n\t\tlet _ = propertyToIdOrLiteral.get(propertyName)\n\t\tif (_ === undefined) {\n\t\t\t_ = propertyNameOk(propertyName) ? Identifier(propertyName) : Literal(propertyName)\n\t\t\tpropertyToIdOrLiteral.set(propertyName, _)\n\t\t}\n\t\treturn _\n\t},\n\n\tmember = (object, propertyName) =>\n\t\tmemberExpression(object, propertyIdOrLiteralCached(propertyName)),\n\n\ttoStatement = _ =>\n\t\t(_ instanceof Statement || _ instanceof Declaration) ? _ : ExpressionStatement(_),\n\n\ttoStatements = _ => _ instanceof Array ? _.map(toStatement) : [ toStatement(_) ],\n\n\tthrowError = msg =>\n\t\tThrowStatement(NewExpression(Identifier('Error'), [ Literal(msg) ])),\n\n\t// TODO:ES6 arrow functions\n\tthunk = value =>\n\t\tfunctionExpressionThunk(BlockStatement([ ReturnStatement(value) ]), false)\n"],"sourceRoot":"/src"}